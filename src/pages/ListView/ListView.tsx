import MainLayout from "../../components/MainLayout";
import { Card, ClickableCard, Title } from "../../components/Card";
import WidthSpaced from "../../components/WidthSpaced";
import { useEffect, useState } from "react";
import localforage from "localforage";
import styles from "./styles.module.css";
import { Link } from "react-router-dom";
import Header from "../../components/Header";
import { Button, RouterButton } from "../../components/Button";
import { Member } from "../../model/model";
import image1 from "../../assets/images/people/image1.png";
import image2 from "../../assets/images/people/image2.png";
import image3 from "../../assets/images/people/image3.png";
import image4 from "../../assets/images/people/image4.png";
import image5 from "../../assets/images/people/image5.png";
import image6 from "../../assets/images/people/image6.png";

// const MILES_CONVERSION = 0.62137119;

interface GroupsData {
  infoParagraph: string,
  voteButton: boolean,
  members: Member[],
}


const CompassSvg = <svg width="45" height="42" viewBox="0 0 45 42" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M22.5 3.9375C18.8843 3.9375 15.3498 4.9382 12.3435 6.81305C9.33715 8.6879 6.994 11.3527 5.61034 14.4705C4.22667 17.5882 3.86464 21.0189 4.57003 24.3287C5.27541 27.6385 7.01653 30.6788 9.57321 33.065C12.1299 35.4512 15.3873 37.0763 18.9335 37.7346C22.4797 38.393 26.1555 38.0551 29.4959 36.7637C32.8364 35.4723 35.6915 33.2853 37.7003 30.4794C39.7091 27.6735 40.7813 24.3746 40.7813 21C40.7761 16.4762 38.8484 12.1391 35.4212 8.94027C31.9939 5.74146 27.3469 3.94228 22.5 3.9375ZM22.5 35.4375C19.4406 35.4375 16.4499 34.5908 13.906 33.0043C11.3622 31.4179 9.37954 29.1631 8.20875 26.525C7.03795 23.8869 6.73162 20.984 7.32849 18.1834C7.92535 15.3828 9.39861 12.8103 11.562 10.7911C13.7253 8.77203 16.4816 7.39699 19.4822 6.83991C22.4828 6.28284 25.5931 6.56875 28.4196 7.66149C31.2462 8.75423 33.6621 10.6047 35.3618 12.979C37.0615 15.3532 37.9688 18.1445 37.9688 21C37.9641 24.8277 36.3329 28.4974 33.4329 31.2041C30.533 33.9107 26.6011 35.4332 22.5 35.4375ZM30.3082 11.9503L19.0582 17.2003C18.7862 17.3278 18.5655 17.5338 18.4289 17.7877L12.8039 28.2877C12.6966 28.4878 12.6459 28.7103 12.6567 28.9339C12.6674 29.1575 12.7393 29.3749 12.8654 29.5652C12.9915 29.7556 13.1677 29.9127 13.3773 30.0217C13.5868 30.1306 13.8227 30.1877 14.0625 30.1875C14.2808 30.1872 14.4961 30.14 14.6918 30.0497L25.9418 24.7997C26.2138 24.6722 26.4345 24.4662 26.5711 24.2123L32.1961 13.7123C32.3288 13.4658 32.3749 13.1865 32.3278 12.9141C32.2808 12.6417 32.1429 12.3901 31.9339 12.195C31.7249 11.9999 31.4553 11.8713 31.1634 11.8274C30.8716 11.7834 30.5724 11.8264 30.3082 11.9503ZM24.2578 22.6406L17.2072 25.9399L20.7422 19.3594L27.7998 16.0666L24.2578 22.6406Z" fill="black"/>
</svg>

const VoteSvg = <svg width="40" height="41" viewBox="0 0 40 41" fill="none" xmlns="http://www.w3.org/2000/svg">
<mask id="path-1-inside-1_424_27" fill="white">
<path d="M36.6432 29.5282C36.6002 29.399 36.5203 29.2872 36.4147 29.2082C36.309 29.1293 36.1829 29.0872 36.0537 29.0877H31.2422V21.6205C31.2411 20.9782 31.0001 20.3626 30.5722 19.9085C30.1442 19.4543 29.5641 19.1987 28.9589 19.1975H28.1286V16.7921C28.1276 15.865 27.7987 14.972 27.2069 14.2899L15.2175 1.13963C14.6433 0.510417 13.8794 0.114711 13.0587 0.0213427C12.238 -0.0720256 11.4125 0.142852 10.7256 0.628599L4.99246 4.686C4.507 5.026 4.12172 5.50437 3.88086 6.06621C3.64 6.62805 3.55333 7.25057 3.63078 7.86232L4.74753 16.9243C4.76559 18.1365 5.18269 19.3038 5.92654 20.224L7.96076 22.7351V29.0745H3.94629C3.81711 29.074 3.69097 29.1161 3.58534 29.195C3.47972 29.2739 3.39985 29.3858 3.35679 29.515L0.0356156 40.1189C0.00233935 40.2188 -0.00782227 40.3257 0.0059873 40.4306C0.0197969 40.5355 0.0571728 40.6354 0.114965 40.7217C0.172756 40.8081 0.24927 40.8785 0.338056 40.9269C0.426842 40.9753 0.525297 41.0004 0.625123 41H39.3749C39.4747 41.0004 39.5732 40.9753 39.6619 40.9269C39.7507 40.8785 39.8272 40.8081 39.885 40.7217C39.9428 40.6354 39.9802 40.5355 39.994 40.4306C40.0078 40.3257 39.9977 40.2188 39.9644 40.1189L36.6432 29.5282ZM5.99297 16.8758C5.99443 16.8494 5.99443 16.823 5.99297 16.7965L4.87207 7.69492C4.82663 7.32621 4.88049 6.95138 5.02743 6.6138C5.17436 6.27623 5.40837 5.9897 5.70236 5.78736L11.4148 1.72996C11.8591 1.41576 12.3932 1.27675 12.9241 1.33712C13.4551 1.39748 13.9493 1.6534 14.3208 2.06037L26.3061 15.193C26.6825 15.6298 26.8913 16.2002 26.8914 16.7921V19.1799H15.3711L14.5408 17.4706C14.4665 17.314 14.3366 17.1952 14.1797 17.1402C14.0229 17.0853 13.8518 17.0987 13.7043 17.1776C13.5568 17.2565 13.4448 17.3943 13.393 17.5608C13.3412 17.7273 13.3539 17.9087 13.4282 18.0653L18.1111 27.9026C18.3147 28.3323 18.3909 28.8173 18.3296 29.2938C18.2682 29.7703 18.0722 30.2158 17.7674 30.5717C17.4626 30.9276 17.0633 31.1771 16.6222 31.2873C16.1811 31.3975 15.7188 31.3633 15.2964 31.1891L15.1594 31.1318C14.6871 30.9367 14.2907 30.5782 14.0343 30.1142L10.9415 24.4664C10.8354 24.2731 10.7131 24.0902 10.5762 23.9201L6.87307 19.3649C6.31179 18.6716 5.99999 17.7898 5.99297 16.8758ZM9.6255 24.8056C9.71434 24.9152 9.79354 25.0332 9.86213 25.1581L12.9425 30.7794C13.3401 31.5019 13.956 32.0607 14.6903 32.3653L14.8273 32.4226C15.2335 32.591 15.6657 32.6777 16.1018 32.6781C16.6965 32.6757 17.2808 32.5121 17.7992 32.2028C18.3176 31.8935 18.753 31.4488 19.064 30.9109C19.3751 30.373 19.5515 29.7597 19.5765 29.1291C19.6016 28.4986 19.4744 27.8717 19.2071 27.3079L15.998 20.5015H28.9589C29.2341 20.5015 29.4981 20.6175 29.6927 20.8241C29.8874 21.0306 29.9967 21.3108 29.9967 21.6029V35.5108H9.2062V24.2726L9.6255 24.8056ZM1.48863 39.6828L4.39465 30.4005H7.96076V35.5108H6.13827C5.97311 35.5108 5.81472 35.5804 5.69794 35.7044C5.58115 35.8283 5.51555 35.9964 5.51555 36.1716C5.51555 36.3469 5.58115 36.515 5.69794 36.6389C5.81472 36.7628 5.97311 36.8325 6.13827 36.8325H32.9733C33.1385 36.8325 33.2969 36.7628 33.4137 36.6389C33.5304 36.515 33.596 36.3469 33.596 36.1716C33.596 35.9964 33.5304 35.8283 33.4137 35.7044C33.2969 35.5804 33.1385 35.5108 32.9733 35.5108H31.2422V30.3961H35.6012L38.5072 39.6784L1.48863 39.6828Z"/>
</mask>
<path d="M36.6432 29.5282C36.6002 29.399 36.5203 29.2872 36.4147 29.2082C36.309 29.1293 36.1829 29.0872 36.0537 29.0877H31.2422V21.6205C31.2411 20.9782 31.0001 20.3626 30.5722 19.9085C30.1442 19.4543 29.5641 19.1987 28.9589 19.1975H28.1286V16.7921C28.1276 15.865 27.7987 14.972 27.2069 14.2899L15.2175 1.13963C14.6433 0.510417 13.8794 0.114711 13.0587 0.0213427C12.238 -0.0720256 11.4125 0.142852 10.7256 0.628599L4.99246 4.686C4.507 5.026 4.12172 5.50437 3.88086 6.06621C3.64 6.62805 3.55333 7.25057 3.63078 7.86232L4.74753 16.9243C4.76559 18.1365 5.18269 19.3038 5.92654 20.224L7.96076 22.7351V29.0745H3.94629C3.81711 29.074 3.69097 29.1161 3.58534 29.195C3.47972 29.2739 3.39985 29.3858 3.35679 29.515L0.0356156 40.1189C0.00233935 40.2188 -0.00782227 40.3257 0.0059873 40.4306C0.0197969 40.5355 0.0571728 40.6354 0.114965 40.7217C0.172756 40.8081 0.24927 40.8785 0.338056 40.9269C0.426842 40.9753 0.525297 41.0004 0.625123 41H39.3749C39.4747 41.0004 39.5732 40.9753 39.6619 40.9269C39.7507 40.8785 39.8272 40.8081 39.885 40.7217C39.9428 40.6354 39.9802 40.5355 39.994 40.4306C40.0078 40.3257 39.9977 40.2188 39.9644 40.1189L36.6432 29.5282ZM5.99297 16.8758C5.99443 16.8494 5.99443 16.823 5.99297 16.7965L4.87207 7.69492C4.82663 7.32621 4.88049 6.95138 5.02743 6.6138C5.17436 6.27623 5.40837 5.9897 5.70236 5.78736L11.4148 1.72996C11.8591 1.41576 12.3932 1.27675 12.9241 1.33712C13.4551 1.39748 13.9493 1.6534 14.3208 2.06037L26.3061 15.193C26.6825 15.6298 26.8913 16.2002 26.8914 16.7921V19.1799H15.3711L14.5408 17.4706C14.4665 17.314 14.3366 17.1952 14.1797 17.1402C14.0229 17.0853 13.8518 17.0987 13.7043 17.1776C13.5568 17.2565 13.4448 17.3943 13.393 17.5608C13.3412 17.7273 13.3539 17.9087 13.4282 18.0653L18.1111 27.9026C18.3147 28.3323 18.3909 28.8173 18.3296 29.2938C18.2682 29.7703 18.0722 30.2158 17.7674 30.5717C17.4626 30.9276 17.0633 31.1771 16.6222 31.2873C16.1811 31.3975 15.7188 31.3633 15.2964 31.1891L15.1594 31.1318C14.6871 30.9367 14.2907 30.5782 14.0343 30.1142L10.9415 24.4664C10.8354 24.2731 10.7131 24.0902 10.5762 23.9201L6.87307 19.3649C6.31179 18.6716 5.99999 17.7898 5.99297 16.8758ZM9.6255 24.8056C9.71434 24.9152 9.79354 25.0332 9.86213 25.1581L12.9425 30.7794C13.3401 31.5019 13.956 32.0607 14.6903 32.3653L14.8273 32.4226C15.2335 32.591 15.6657 32.6777 16.1018 32.6781C16.6965 32.6757 17.2808 32.5121 17.7992 32.2028C18.3176 31.8935 18.753 31.4488 19.064 30.9109C19.3751 30.373 19.5515 29.7597 19.5765 29.1291C19.6016 28.4986 19.4744 27.8717 19.2071 27.3079L15.998 20.5015H28.9589C29.2341 20.5015 29.4981 20.6175 29.6927 20.8241C29.8874 21.0306 29.9967 21.3108 29.9967 21.6029V35.5108H9.2062V24.2726L9.6255 24.8056ZM1.48863 39.6828L4.39465 30.4005H7.96076V35.5108H6.13827C5.97311 35.5108 5.81472 35.5804 5.69794 35.7044C5.58115 35.8283 5.51555 35.9964 5.51555 36.1716C5.51555 36.3469 5.58115 36.515 5.69794 36.6389C5.81472 36.7628 5.97311 36.8325 6.13827 36.8325H32.9733C33.1385 36.8325 33.2969 36.7628 33.4137 36.6389C33.5304 36.515 33.596 36.3469 33.596 36.1716C33.596 35.9964 33.5304 35.8283 33.4137 35.7044C33.2969 35.5804 33.1385 35.5108 32.9733 35.5108H31.2422V30.3961H35.6012L38.5072 39.6784L1.48863 39.6828Z" fill="black"/>
<path d="M36.6432 29.5282L70.9938 18.7561L70.8984 18.4518L70.7976 18.1493L36.6432 29.5282ZM36.0537 29.0877V65.0877H36.1273L36.201 65.0874L36.0537 29.0877ZM31.2422 29.0877H-4.75784V65.0877H31.2422V29.0877ZM31.2422 21.6205H67.2422V21.5897L67.2421 21.559L31.2422 21.6205ZM28.9589 19.1975L29.0281 -16.8024L28.9935 -16.8025H28.9589V19.1975ZM28.1286 19.1975H-7.87143V55.1975H28.1286V19.1975ZM28.1286 16.7921H64.1286V16.7734L64.1285 16.7547L28.1286 16.7921ZM27.2069 14.2899L54.4002 -9.30091L54.1091 -9.63648L53.8098 -9.96475L27.2069 14.2899ZM15.2175 1.13963L41.8204 -23.115L41.8148 -23.1211L41.8093 -23.1272L15.2175 1.13963ZM10.7256 0.628599L-10.0612 -28.7637L-10.0707 -28.757L10.7256 0.628599ZM4.99246 4.686L25.6439 34.1736L25.7165 34.1227L25.7888 34.0716L4.99246 4.686ZM3.63078 7.86232L39.3605 3.45921L39.3532 3.39972L39.3456 3.34027L3.63078 7.86232ZM4.74753 16.9243L40.7435 16.3878L40.7146 14.4473L40.4772 12.5212L4.74753 16.9243ZM5.92654 20.224L-22.0698 42.856L-22.0582 42.8703L-22.0465 42.8847L5.92654 20.224ZM7.96076 22.7351H43.9608V9.98305L35.9338 0.0743551L7.96076 22.7351ZM7.96076 29.0745V65.0745H43.9608V29.0745H7.96076ZM3.94629 29.0745L3.79902 65.0742L3.87266 65.0745H3.94629V29.0745ZM3.35679 29.515L-30.7976 18.1361L-30.9004 18.4447L-30.9976 18.7551L3.35679 29.515ZM0.0356156 40.1189L34.1898 51.4984L34.2927 51.1895L34.39 50.8788L0.0356156 40.1189ZM0.625123 41V5H0.551388L0.477653 5.0003L0.625123 41ZM39.3749 41L39.5223 5.0003L39.4486 5H39.3749V41ZM39.9644 40.1189L5.61382 50.891L5.70932 51.1956L5.81021 51.4984L39.9644 40.1189ZM5.99297 16.8758L-29.9517 14.8799L-30.0147 16.0153L-30.006 17.1525L5.99297 16.8758ZM5.99297 16.7965L41.9376 14.8006L41.8706 13.5948L41.723 12.3963L5.99297 16.7965ZM4.87207 7.69492L40.6021 3.29464L40.6017 3.29148L4.87207 7.69492ZM5.70236 5.78736L26.1119 35.4429L26.3316 35.2917L26.549 35.1373L5.70236 5.78736ZM11.4148 1.72996L-9.3696 -27.6641L-9.40075 -27.6421L-9.43185 -27.62L11.4148 1.72996ZM14.3208 2.06037L40.9117 -22.2074L40.9075 -22.212L14.3208 2.06037ZM26.3061 15.193L53.5756 -8.30961L53.2417 -8.69703L52.897 -9.07481L26.3061 15.193ZM26.8914 16.7921L62.8914 16.7921L62.8914 16.7864L26.8914 16.7921ZM26.8914 19.1799V55.1799H62.8914V19.1799H26.8914ZM15.3711 19.1799L-17.0108 34.9093L-7.16437 55.1799H15.3711V19.1799ZM14.5408 17.4706L-17.9811 32.9084L-17.9117 33.0545L-17.841 33.2L14.5408 17.4706ZM13.4282 18.0653L-19.0936 33.5032L-19.0852 33.5209L-19.0768 33.5386L13.4282 18.0653ZM18.1111 27.9026L50.6411 12.482L50.6286 12.4556L50.6161 12.4293L18.1111 27.9026ZM15.2964 31.1891L1.41089 64.4034L1.49128 64.4371L1.57183 64.4703L15.2964 31.1891ZM15.1594 31.1318L29.0449 -2.08252L28.9736 -2.11234L28.9021 -2.14184L15.1594 31.1318ZM14.0343 30.1142L-17.5411 47.4056L-17.5094 47.4634L-17.4776 47.521L14.0343 30.1142ZM10.9415 24.4664L42.5169 7.17501L42.5086 7.1598L42.5003 7.1446L10.9415 24.4664ZM10.5762 23.9201L38.6187 1.34541L38.5647 1.2783L38.5103 1.21145L10.5762 23.9201ZM6.87307 19.3649L-21.1066 42.0175L-21.0839 42.0456L-21.0611 42.0736L6.87307 19.3649ZM9.6255 24.8056L-18.6699 47.0625L-18.5056 47.2714L-18.3382 47.4778L9.6255 24.8056ZM9.86213 25.1581L41.4328 7.85794L41.4249 7.84357L41.417 7.8292L9.86213 25.1581ZM12.9425 30.7794L-18.6281 48.0795L-18.6124 48.1081L-18.5967 48.1367L12.9425 30.7794ZM14.6903 32.3653L28.575 -0.849347L28.5303 -0.868013L28.4856 -0.886559L14.6903 32.3653ZM14.8273 32.4226L0.942606 65.6373L0.99148 65.6577L1.04041 65.678L14.8273 32.4226ZM16.1018 32.6781L16.0633 68.6781L16.1566 68.6782L16.2499 68.6778L16.1018 32.6781ZM19.2071 27.3079L-13.3552 42.6604L-13.3384 42.696L-13.3216 42.7315L19.2071 27.3079ZM15.998 20.5015V-15.4985H-40.776L-16.5643 35.854L15.998 20.5015ZM29.9967 21.6029H-6.00328H29.9967ZM29.9967 35.5108V71.5108H65.9967V35.5108H29.9967ZM9.2062 35.5108H-26.7938V71.5108H9.2062V35.5108ZM9.2062 24.2726L37.5016 2.01566L-26.7938 -79.7237L-26.7938 24.2726H9.2062ZM1.48863 39.6828L-32.867 28.9269L-47.5069 75.6886L1.49291 75.6828L1.48863 39.6828ZM4.39465 30.4005V-5.59948H-22.0577L-29.961 19.6447L4.39465 30.4005ZM7.96076 30.4005H43.9608V-5.59948H7.96076V30.4005ZM7.96076 35.5108V71.5108H43.9608V35.5108H7.96076ZM5.51555 36.1716L-30.4845 36.1716L5.51555 36.1716ZM31.2422 35.5108H-4.75784V71.5108H31.2422V35.5108ZM31.2422 30.3961V-5.60388H-4.75784V30.3961H31.2422ZM35.6012 30.3961L69.9569 19.6403L62.0536 -5.60388H35.6012V30.3961ZM38.5072 39.6784L38.5115 75.6784L87.4991 75.6725L72.8629 28.9225L38.5072 39.6784ZM70.7976 18.1493C68.5147 11.2973 64.1592 5.00004 57.9649 0.370998L14.8644 58.0455C8.88133 53.5743 4.68558 47.5007 2.48887 40.9072L70.7976 18.1493ZM57.9649 0.370998C51.7361 -4.28382 44.0266 -6.94521 35.9064 -6.912L36.201 65.0874C28.3392 65.1196 20.8819 62.5424 14.8644 58.0455L57.9649 0.370998ZM36.0537 -6.9123H31.2422V65.0877H36.0537V-6.9123ZM67.2422 29.0877V21.6205H-4.75784V29.0877H67.2422ZM67.2421 21.559C67.2259 12.0563 63.6804 2.55002 56.772 -4.78097L4.37234 44.5979C-1.68009 38.1752 -4.74374 29.9002 -4.75779 21.682L67.2421 21.559ZM56.772 -4.78097C49.7959 -12.1838 39.869 -16.7816 29.0281 -16.8024L28.8896 55.1974C19.2591 55.1789 10.4925 51.0925 4.37234 44.5979L56.772 -4.78097ZM28.9589 -16.8025H28.1286V55.1975H28.9589V-16.8025ZM64.1286 19.1975V16.7921H-7.87143V19.1975H64.1286ZM64.1285 16.7547C64.1189 7.42645 60.8271 -1.89261 54.4002 -9.30091L0.0136343 37.8806C-5.22971 31.8366 -7.86365 24.3035 -7.87142 16.8295L64.1285 16.7547ZM53.8098 -9.96475L41.8204 -23.115L-11.3854 25.3942L0.604043 38.5445L53.8098 -9.96475ZM41.8093 -23.1272C35.5669 -29.9676 26.8923 -34.6371 17.1281 -35.7479L8.98936 35.7906C0.866539 34.8665 -6.28029 30.9884 -11.3743 25.4064L41.8093 -23.1272ZM17.1281 -35.7479C7.34259 -36.8612 -2.30064 -34.2521 -10.0612 -28.7637L31.5124 30.0209C25.1256 34.5378 17.1335 36.7171 8.98936 35.7906L17.1281 -35.7479ZM-10.0707 -28.757L-15.8039 -24.6996L25.7888 34.0716L31.522 30.0142L-10.0707 -28.757ZM-15.659 -24.8016C-21.8119 -20.4924 -26.4128 -14.6358 -29.2068 -8.11841L36.9686 20.2508C34.6563 25.6446 30.8259 30.5444 25.6439 34.1736L-15.659 -24.8016ZM-29.2068 -8.11841C-31.9961 -1.61209 -32.9592 5.47286 -32.0841 12.3844L39.3456 3.34027C40.0658 9.02828 39.2761 14.8682 36.9686 20.2508L-29.2068 -8.11841ZM-32.0989 12.2654L-30.9822 21.3274L40.4772 12.5212L39.3605 3.45921L-32.0989 12.2654ZM-31.2485 17.4608C-31.1136 26.5113 -28.0097 35.5081 -22.0698 42.856L33.9229 -2.40801C38.3751 3.09951 40.6448 9.76167 40.7435 16.3878L-31.2485 17.4608ZM-22.0465 42.8847L-20.0123 45.3958L35.9338 0.0743551L33.8996 -2.43674L-22.0465 42.8847ZM-28.0392 22.7351V29.0745H43.9608V22.7351H-28.0392ZM7.96076 -6.92551H3.94629V65.0745H7.96076V-6.92551ZM4.09356 -6.92521C-4.0267 -6.95843 -11.7362 -4.29699 -17.9649 0.357782L25.1356 58.0322C19.1181 62.5291 11.6609 65.1063 3.79902 65.0742L4.09356 -6.92521ZM-17.9649 0.357782C-24.159 4.98665 -28.5146 11.2838 -30.7976 18.1361L37.5111 40.894C35.3143 47.4878 31.1184 53.5612 25.1356 58.0322L-17.9649 0.357782ZM-30.9976 18.7551L-34.3188 29.359L34.39 50.8788L37.7112 40.2749L-30.9976 18.7551ZM-34.1186 28.7394C-35.8848 34.0407 -36.4078 39.6464 -35.6861 45.1286L35.6981 35.7326C36.3921 41.005 35.8895 46.3969 34.1898 51.4984L-34.1186 28.7394ZM-35.6861 45.1286C-34.9643 50.6125 -32.996 55.9724 -29.8056 60.7407L30.0356 20.7028C33.1103 25.2984 35.0039 30.4586 35.6981 35.7326L-35.6861 45.1286ZM-29.8056 60.7407C-26.6099 65.5171 -22.2336 69.6225 -16.8997 72.5316L17.5758 9.32219C22.7321 12.1345 26.9554 16.0991 30.0356 20.7028L-29.8056 60.7407ZM-16.8997 72.5316C-11.5521 75.4484 -5.48257 77.0253 0.772594 76.9997L0.477653 5.0003C6.53316 4.97549 12.4058 6.50233 17.5758 9.32219L-16.8997 72.5316ZM0.625123 77H39.3749V5H0.625123V77ZM39.2274 76.9997C45.4824 77.0253 51.5519 75.4484 56.8997 72.5316L22.4242 9.32219C27.5944 6.50226 33.467 4.97549 39.5223 5.0003L39.2274 76.9997ZM56.8997 72.5316C62.2338 69.6223 66.61 65.5169 69.8056 60.7407L9.96444 20.7028C13.0445 16.0993 17.2677 12.1346 22.4242 9.32219L56.8997 72.5316ZM69.8056 60.7407C72.9959 55.9725 74.9643 50.6126 75.6862 45.1286L4.30188 35.7326C4.99609 30.4585 6.88975 25.2983 9.96444 20.7028L69.8056 60.7407ZM75.6862 45.1286C76.4078 39.646 75.8847 34.0403 74.1186 28.7394L5.81021 51.4984C4.11064 46.3973 3.60784 41.0054 4.30188 35.7326L75.6862 45.1286ZM74.3149 29.3468L70.9938 18.7561L2.29265 40.3004L5.61382 50.891L74.3149 29.3468ZM41.9376 18.8718C42.0129 17.5158 42.0129 16.1566 41.9376 14.8006L-29.9517 18.7925C-30.024 17.4893 -30.024 16.1831 -29.9517 14.8799L41.9376 18.8718ZM41.723 12.3963L40.6021 3.29464L-30.858 12.0952L-29.7371 21.1968L41.723 12.3963ZM40.6017 3.29148C41.3361 9.24967 40.4822 15.3617 38.0361 20.9814L-27.9813 -7.75375C-30.7212 -1.45895 -31.6828 5.40275 -30.8576 12.0984L40.6017 3.29148ZM38.0361 20.9814C35.5851 26.6124 31.5463 31.7028 26.1119 35.4429L-14.7071 -23.8682C-20.7296 -19.7234 -25.2364 -14.06 -27.9813 -7.75375L38.0361 20.9814ZM26.549 35.1373L32.2614 31.0799L-9.43185 -27.62L-15.1443 -23.5626L26.549 35.1373ZM32.1991 31.124C25.5709 35.8108 17.2893 38.0654 8.85722 37.1067L16.991 -34.4324C7.49715 -35.5119 -1.85262 -32.9793 -9.3696 -27.6641L32.1991 31.124ZM8.85722 37.1067C0.446479 36.1504 -6.969 32.1347 -12.2659 26.3328L40.9075 -22.212C34.8675 -28.8279 26.4636 -33.3554 16.991 -34.4324L8.85722 37.1067ZM-12.2701 26.3281L-0.284808 39.4607L52.897 -9.07481L40.9117 -22.2074L-12.2701 26.3281ZM-0.963487 38.6955C-6.37946 32.4115 -9.10733 24.5806 -9.10857 16.7979L62.8914 16.7864C62.89 7.81979 59.7445 -1.15198 53.5756 -8.30961L-0.963487 38.6955ZM-9.10857 16.7921V19.1799H62.8914V16.7921H-9.10857ZM26.8914 -16.8201H15.3711V55.1799H26.8914V-16.8201ZM47.753 3.45047L46.9227 1.74116L-17.841 33.2L-17.0108 34.9093L47.753 3.45047ZM47.0627 2.03272C43.0618 -6.39563 35.733 -13.4554 26.0789 -16.8364L2.28063 51.1169C-7.05976 47.8457 -14.1288 41.0237 -17.9811 32.9084L47.0627 2.03272ZM26.0789 -16.8364C16.3407 -20.2468 5.7023 -19.3655 -3.26688 -14.5711L30.6755 48.9263C22.0014 53.563 11.705 54.4174 2.28063 51.1169L26.0789 -16.8364ZM-3.26688 -14.5711C-12.1404 -9.82776 -18.2534 -1.90681 -20.9829 6.8699L47.769 28.2517C45.143 36.6954 39.2539 44.3407 30.6755 48.9263L-3.26688 -14.5711ZM-20.9829 6.8699C-23.7019 15.6127 -23.0707 25.125 -19.0936 33.5032L45.9501 2.62745C49.7785 10.6925 50.3844 19.8419 47.769 28.2517L-20.9829 6.8699ZM-19.0768 33.5386L-14.3939 43.376L50.6161 12.4293L45.9333 2.59199L-19.0768 33.5386ZM-14.4189 43.3233C-17.2016 37.4532 -18.1852 30.9829 -17.3757 24.6962L54.0348 33.8913C54.967 26.6516 53.8311 19.2113 50.6411 12.482L-14.4189 43.3233ZM-17.3757 24.6962C-16.5656 18.405 -13.9517 12.2642 -9.57516 7.15411L45.11 53.9893C50.0961 48.1675 53.102 41.1355 54.0348 33.8913L-17.3757 24.6962ZM-9.57516 7.15411C-5.17781 2.01974 0.854716 -1.87983 7.89588 -3.63905L25.3485 66.2137C33.2719 64.234 40.103 59.8355 45.11 53.9893L-9.57516 7.15411ZM7.89588 -3.63905C14.9612 -5.40432 22.3657 -4.8366 29.0209 -2.09208L1.57183 64.4703C9.07196 67.5632 17.4009 68.1994 25.3485 66.2137L7.89588 -3.63905ZM29.1819 -2.02525L29.0449 -2.08252L1.27389 64.3462L1.41089 64.4034L29.1819 -2.02525ZM28.9021 -2.14184C36.2809 0.905743 42.0111 6.30753 45.5463 12.7073L-17.4776 47.521C-13.4298 54.8488 -6.90674 60.9678 1.41665 64.4055L28.9021 -2.14184ZM45.6098 12.8228L42.5169 7.17501L-20.6339 41.7578L-17.5411 47.4056L45.6098 12.8228ZM42.5003 7.1446C41.3884 5.11889 40.0925 3.1762 38.6187 1.34541L-17.4663 46.4949C-18.6662 45.0043 -19.7176 43.4273 -20.6172 41.7882L42.5003 7.1446ZM38.5103 1.21145L34.8072 -3.34377L-21.0611 42.0736L-17.358 46.6288L38.5103 1.21145ZM34.8527 -3.28764C39.5562 2.52197 41.938 9.57961 41.9919 16.5992L-30.006 17.1525C-29.938 26 -26.9327 34.8213 -21.1066 42.0175L34.8527 -3.28764ZM-18.3382 47.4778C-19.6172 45.9004 -20.7367 44.2278 -21.6928 42.4869L41.417 7.8292C40.3238 5.83852 39.0459 3.93004 37.5892 2.13342L-18.3382 47.4778ZM-21.7085 42.4582L-18.6281 48.0795L44.5132 13.4793L41.4328 7.85794L-21.7085 42.4582ZM-18.5967 48.1367C-14.4186 55.7287 -7.68534 62.0575 0.894962 65.6173L28.4856 -0.886559C35.5973 2.06389 41.0988 7.27507 44.4817 13.422L-18.5967 48.1367ZM0.805607 65.58L0.942606 65.6373L28.7119 -0.792077L28.575 -0.849347L0.805607 65.58ZM1.04041 65.678C5.768 67.638 10.8687 68.6726 16.0633 68.6781L16.1402 -3.32185C20.4627 -3.31723 24.699 -2.45593 28.6141 -0.832795L1.04041 65.678ZM16.2499 68.6778C23.3894 68.6485 30.2785 66.6775 36.2432 63.1191L-0.64479 1.28646C4.28309 -1.6534 10.0036 -3.29708 15.9537 -3.32156L16.2499 68.6778ZM36.2432 63.1191C42.1905 59.5711 46.9399 54.6197 50.2289 48.9318L-12.1008 12.89C-9.43391 8.27796 -5.55529 4.21595 -0.64479 1.28646L36.2432 63.1191ZM50.2289 48.9318C53.5123 43.2535 55.2951 36.932 55.5482 30.557L-16.3951 27.7012C-16.1921 22.5874 -14.7621 17.4924 -12.1008 12.89L50.2289 48.9318ZM55.5482 30.557C55.8012 24.1827 54.5249 17.7666 51.7357 11.8843L-13.3216 42.7315C-15.5761 37.9767 -16.5981 32.8144 -16.3951 27.7012L55.5482 30.557ZM51.7693 11.9554L48.5603 5.14904L-16.5643 35.854L-13.3552 42.6604L51.7693 11.9554ZM15.998 56.5015H28.9589V-15.4985H15.998V56.5015ZM28.9589 56.5015C18.9734 56.5015 9.86223 52.2725 3.4929 45.5135L55.8926 -3.86534C49.134 -11.0374 39.4948 -15.4985 28.9589 -15.4985V56.5015ZM3.4929 45.5135C-2.80812 38.827 -6.00328 30.1915 -6.00328 21.6029L65.9967 21.6029C65.9967 12.4301 62.5829 3.23423 55.8926 -3.86534L3.4929 45.5135ZM-6.00328 21.6029V35.5108H65.9967V21.6029H-6.00328ZM29.9967 -0.489173H9.2062V71.5108H29.9967V-0.489173ZM45.2062 35.5108V24.2726H-26.7938V35.5108H45.2062ZM-19.0892 46.5295L-18.6699 47.0625L37.9209 2.54871L37.5016 2.01566L-19.0892 46.5295ZM35.8443 50.4386L38.7503 41.1564L-29.961 19.6447L-32.867 28.9269L35.8443 50.4386ZM4.39465 66.4005H7.96076V-5.59948H4.39465V66.4005ZM-28.0392 30.4005V35.5108H43.9608V30.4005H-28.0392ZM7.96076 -0.489173H6.13827V71.5108H7.96076V-0.489173ZM6.13827 -0.489173C-4.28762 -0.489173 -13.8212 3.9255 -20.5019 11.0149L31.8978 60.3938C25.4506 67.2354 16.2338 71.5108 6.13827 71.5108V-0.489173ZM-20.5019 11.0149C-27.1143 18.0318 -30.4845 27.1156 -30.4845 36.1716L41.5155 36.1716C41.5155 44.8772 38.2766 53.6248 31.8978 60.3938L-20.5019 11.0149ZM-30.4845 36.1716C-30.4845 45.2277 -27.1143 54.3115 -20.5019 61.3283L31.8978 11.9495C38.2766 18.7185 41.5155 27.4661 41.5155 36.1716L-30.4845 36.1716ZM-20.5019 61.3283C-13.8212 68.4178 -4.28762 72.8325 6.13827 72.8325V0.832457C16.2338 0.832457 25.4506 5.10789 31.8978 11.9495L-20.5019 61.3283ZM6.13827 72.8325H32.9733V0.832457H6.13827V72.8325ZM32.9733 72.8325C43.3992 72.8325 52.9327 68.4178 59.6135 61.3283L7.21381 11.9495C13.661 5.10787 22.8778 0.832457 32.9733 0.832457V72.8325ZM59.6135 61.3283C66.2259 54.3114 69.596 45.2276 69.596 36.1716H-2.40396C-2.40396 27.4662 0.834939 18.7186 7.21381 11.9495L59.6135 61.3283ZM69.596 36.1716C69.596 27.1157 66.2259 18.0319 59.6135 11.0149L7.21381 60.3938C0.834939 53.6247 -2.40396 44.8771 -2.40396 36.1716H69.596ZM59.6135 11.0149C52.9327 3.92548 43.3992 -0.489173 32.9733 -0.489173V71.5108C22.8778 71.5108 13.661 67.2354 7.21381 60.3938L59.6135 11.0149ZM32.9733 -0.489173H31.2422V71.5108H32.9733V-0.489173ZM67.2422 35.5108V30.3961H-4.75784V35.5108H67.2422ZM31.2422 66.3961H35.6012V-5.60388H31.2422V66.3961ZM1.24553 41.152L4.15155 50.4342L72.8629 28.9225L69.9569 19.6403L1.24553 41.152ZM38.5029 3.67837L1.48434 3.68277L1.49291 75.6828L38.5115 75.6784L38.5029 3.67837Z" fill="black" mask="url(#path-1-inside-1_424_27)"/>
</svg>

const getImg = (imgName: string, key: number) => {
  if (imgName === "image1") {
    return <img src={image1} key={String(key)}/>
  } else if (imgName === "image2") {
    return <img src={image2} key={String(key)}/>
  } else if (imgName === "image3") {
    return <img src={image3} key={String(key)}/>
  } else if (imgName === "image4") {    
    return <img src={image4} key={String(key)}/>
  } else if (imgName === "image5") {
    return <img src={image5} key={String(key)}/>
  } else if (imgName === "image6") {
    return <img src={image6} key={String(key)}/> 
  }
}

export default function ListView() {

  const [locations, setLocations] = useState([]);
  const [groupsData, setGroupsData] = useState<GroupsData>();
  
  useEffect(() => {
    const members = JSON.parse(localStorage.getItem("members")!)

    // we must map the location vote to the actual location
    members.forEach((member: Member) => {
      member.vote = locations[member.vote-1]
    })
  
    if (members) {
      setGroupsData({
        infoParagraph: "Everyone else is also choosing",
        voteButton: true,
        members: members
      })
    }

  }, [locations])

  useEffect(() => {
    const fetchLocations = async () => {
      try {
        const data: any = await localforage.getItem("locations");
        const parsedData = JSON.parse(data || []);
        
        setLocations(parsedData);
      } catch (err) {}
    };
    fetchLocations();

  }, []);


  // console.log(groupsData)

  const getPlace = (place: number): string => {
    if (place === 1) {
      return "gold"
    } else if (place === 2) {
      return "silver"
    } else if (place === 3) {
      return "bronze"
    }

    return "";
  }

  return (
    <>
      <Header>
        <Link to="/map" className={styles["back-button"]}>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
            <path d="m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z" />
          </svg>
        </Link>
        <h1>Choose a Place!</h1>
      </Header>
      <MainLayout>
        {locations.length > 0 && <p>Choose the place you'd like to go to.</p>}
        {locations
          ? // eslint-disable-next-line @typescript-eslint/no-explicit-any
            locations.map((location: any, place: number) => {
              place+=1;
              return (
                  <>
                <Card key={location.vicinity}>
                 {place <= 3 ?
                 <span className={styles["place"] + " " +styles[getPlace(place)]}>{place}</span>
                : ""  
                }
                 <WidthSpaced>
                    <Title>{location.name}</Title>
                  </WidthSpaced>

                  <p>{location.distance.toFixed(2) + " km"}</p>
                  <p>5 minute commute time</p>
                  {groupsData ? 
                  <div className={styles["mb-m"]}>
                  {groupsData.members.map((member: Member,i: number) => {
                    return member.vote?.name === location.name ? getImg(member.img, i) : <></>
                  })}
                  </div> : <></> }
                  <WidthSpaced>
                    {groupsData?.voteButton ? 
                  <Button variant="acrylic" onClick={() => {
                    const name = localStorage.getItem("name")!
                  
                    groupsData.members.forEach((member: Member) => {
                      if (member.name === name) {
                        member.vote = location
                      }
                    })

                    setGroupsData(structuredClone(groupsData))
                  }} nospacing icon={VoteSvg}>Vote</Button>
                  : ""
                    }
                  <Button variant="acrylic" onClick={() => {
                  window.open(`https://www.google.com/maps/dir//${location.name},${location.vicinity}`, '_blank');
                  }} nospacing icon={CompassSvg}>Directions</Button>
                  </WidthSpaced>
                </Card>

                {place === 3 ? <p className={styles["other"]}>Other Options</p> : <></>}
                </>
              );
            })
          : ""}

        {locations.length == 0 && (
          <>
            <h2>No places found.</h2>
            <p>Looks like your specific preferences did not turn up any places. Try changing your preferences to be more lax to find some places.</p>
            <RouterButton to="/preferences">Change Preferences</RouterButton>
          </>
        )}
      </MainLayout>
    </>
  );
}
